package com.cloversoft.ks.server.request;

import android.content.Context;

import com.cloversoft.ks.R;
import com.cloversoft.ks.config.Keys;
import com.cloversoft.ks.config.Url;
import com.cloversoft.ks.data.model.api.GameListModel;
import com.cloversoft.ks.data.model.api.PlayGameModel;
import com.cloversoft.ks.data.model.api.PromotionModel;
import com.cloversoft.ks.data.model.api.UserInfoModel;
import com.cloversoft.ks.data.model.api.UserModel;
import com.cloversoft.ks.vendor.server.request.APIRequest;
import com.cloversoft.ks.vendor.server.request.APIResponse;
import com.cloversoft.ks.vendor.server.transformer.CollectionTransformer;
import com.cloversoft.ks.vendor.server.transformer.SingleTransformer;

import org.greenrobot.eventbus.EventBus;

import java.util.List;

import okhttp3.MultipartBody;
import retrofit2.Call;
import retrofit2.http.Multipart;
import retrofit2.http.POST;
import retrofit2.http.Part;
import retrofit2.http.Path;

public class Game {

    public static Game getDefault(){
        return new Game();
    }

    public void games(Context context, String account,String password,String auth, int gameid) {
        APIRequest apiRequest = new APIRequest<SingleTransformer>(context) {
            @Override
            public Call<SingleTransformer> onCreateCall() {
                return getRetrofit().create(RequestService.class).requestPlay(Url.getPlay(), getMultipartBody());
            }

            @Override
            public void onResponse() {
                EventBus.getDefault().post(new GamePlayResponse(this));
            }
        };

        apiRequest
                .addParameter(Keys.SUBMIT_TYPE, "play_game")
                .addParameter(Keys.ACCOUNT, account)
                .addParameter(Keys.PASSWORD, password)
                .addParameter(Keys.AUTH, auth)
                .addParameter(Keys.PLATFORM, "mobile")
                .addParameter(Keys.GAMEID,gameid)
                .execute();
    }

    public void gameBalance(Context context, String account,String password,String auth) {
        APIRequest apiRequest = new APIRequest<SingleTransformer>(context) {
            @Override
            public Call<SingleTransformer> onCreateCall() {
                return getRetrofit().create(RequestService.class).requestBal(Url.getAjax(), getMultipartBody());
            }

            @Override
            public void onResponse() {
                EventBus.getDefault().post(new GameBalanceResponse(this));
            }
        };

        apiRequest
                .addParameter(Keys.TYPE, "get_balance")
                .addParameter(Keys.ACCOUNT, account)
                .addParameter(Keys.PASSWORD, password)
                .addParameter(Keys.AUTH, auth)
                .addParameter(Keys.GAMEID, 102)
                .execute();
    }

    public void gameBalance1(Context context, String account,String password,String auth) {
        APIRequest apiRequest = new APIRequest<SingleTransformer>(context) {
            @Override
            public Call<SingleTransformer> onCreateCall() {
                return getRetrofit().create(RequestService.class).requestBal(Url.getAjax(), getMultipartBody());
            }

            @Override
            public void onResponse() {
                EventBus.getDefault().post(new GameBalance1Response(this));
            }
        };

        apiRequest
                .addParameter(Keys.TYPE, "get_balance")
                .addParameter(Keys.ACCOUNT, account)
                .addParameter(Keys.PASSWORD, password)
                .addParameter(Keys.AUTH, auth)
                .addParameter(Keys.GAMEID, 107)
                .execute();
    }

    public void gameBalance2(Context context, String account,String password,String auth) {
        APIRequest apiRequest = new APIRequest<SingleTransformer>(context) {
            @Override
            public Call<SingleTransformer> onCreateCall() {
                return getRetrofit().create(RequestService.class).requestBal(Url.getAjax(), getMultipartBody());
            }

            @Override
            public void onResponse() {
                EventBus.getDefault().post(new GameBalance2Response(this));
            }
        };

        apiRequest
                .addParameter(Keys.TYPE, "get_balance")
                .addParameter(Keys.ACCOUNT, account)
                .addParameter(Keys.PASSWORD, password)
                .addParameter(Keys.AUTH, auth)
                .addParameter(Keys.GAMEID, 108)
                .execute();
    }

    public void gameBalance3(Context context, String account,String password,String auth) {
        APIRequest apiRequest = new APIRequest<SingleTransformer>(context) {
            @Override
            public Call<SingleTransformer> onCreateCall() {
                return getRetrofit().create(RequestService.class).requestBal(Url.getAjax(), getMultipartBody());
            }

            @Override
            public void onResponse() {
                EventBus.getDefault().post(new GameBalance3Response(this));
            }
        };

        apiRequest
                .addParameter(Keys.TYPE, "get_balance")
                .addParameter(Keys.ACCOUNT, account)
                .addParameter(Keys.PASSWORD, password)
                .addParameter(Keys.AUTH, auth)
                .addParameter(Keys.GAMEID, 106)
                .execute();
    }

    public void gameBalance4(Context context, String account,String password,String auth) {
        APIRequest apiRequest = new APIRequest<SingleTransformer>(context) {
            @Override
            public Call<SingleTransformer> onCreateCall() {
                return getRetrofit().create(RequestService.class).requestBal(Url.getAjax(), getMultipartBody());
            }

            @Override
            public void onResponse() {
                EventBus.getDefault().post(new GameBalance4Response(this));
            }
        };

        apiRequest
                .addParameter(Keys.TYPE, "get_balance")
                .addParameter(Keys.ACCOUNT, account)
                .addParameter(Keys.PASSWORD, password)
                .addParameter(Keys.AUTH, auth)
                .addParameter(Keys.GAMEID, 104)
                .execute();
    }

    public void gameBalance5(Context context, String account,String password,String auth) {
        APIRequest apiRequest = new APIRequest<SingleTransformer>(context) {
            @Override
            public Call<SingleTransformer> onCreateCall() {
                return getRetrofit().create(RequestService.class).requestBal(Url.getAjax(), getMultipartBody());
            }

            @Override
            public void onResponse() {
                EventBus.getDefault().post(new GameBalance5Response(this));
            }
        };

        apiRequest
                .addParameter(Keys.TYPE, "get_balance")
                .addParameter(Keys.ACCOUNT, account)
                .addParameter(Keys.PASSWORD, password)
                .addParameter(Keys.AUTH, auth)
                .addParameter(Keys.GAMEID, 301)
                .execute();
    }



    public interface RequestService {
        @Multipart
        @POST("{p}")
        Call<SingleTransformer> requestPlay(@Path(value = "p", encoded = true) String p, @Part List<MultipartBody.Part> parts);

        @Multipart
        @POST("{p}")
        Call<SingleTransformer> requestBal(@Path(value = "p", encoded = true) String p, @Part List<MultipartBody.Part> parts);

    }

    public class GamePlayResponse extends APIResponse<SingleTransformer> {
        public GamePlayResponse(APIRequest apiRequest) {
            super(apiRequest);
        }
    }

    public class GameBalanceResponse extends APIResponse<SingleTransformer> {
        public GameBalanceResponse(APIRequest apiRequest) {
            super(apiRequest);
        }
    }

    public class GameBalance1Response extends APIResponse<SingleTransformer> {
        public GameBalance1Response(APIRequest apiRequest) {
            super(apiRequest);
        }
    }

    public class GameBalance2Response extends APIResponse<SingleTransformer> {
        public GameBalance2Response(APIRequest apiRequest) {
            super(apiRequest);
        }
    }

    public class GameBalance3Response extends APIResponse<SingleTransformer> {
        public GameBalance3Response(APIRequest apiRequest) {
            super(apiRequest);
        }
    }

    public class GameBalance4Response extends APIResponse<SingleTransformer> {
        public GameBalance4Response(APIRequest apiRequest) {
            super(apiRequest);
        }
    }

    public class GameBalance5Response extends APIResponse<SingleTransformer> {
        public GameBalance5Response(APIRequest apiRequest) {
            super(apiRequest);
        }
    }

}
